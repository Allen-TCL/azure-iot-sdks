<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: service/lib/device.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    <h1 class="page-title">Source: service/lib/device.js</h1>
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root for full license information.

'use strict';

var SymmetricKey = function (symmetricKeyInfo) {
  var symmKeys = symmetricKeyInfo;
  Object.defineProperties(this, {
    'primaryKey': {
      enumerable: true,
      get: function () {
        var primaryKey;
        if (symmKeys) {
          primaryKey = symmKeys.primaryKey;
        }
        return primaryKey;
      },
    },
    'secondaryKey': {
      enumerable: true,
      get: function () {
        var secondaryKey;
        if (symmKeys) {
          secondaryKey = symmKeys.secondaryKey;
        }
        return secondaryKey;
      },
    }
  });
};

var AuthenticationMechanism = function (authInfo) {
  Object.defineProperties(this, {
    'SymmetricKey': {
      enumerable: true,
      get: function () {
        var symmKeys;
        if (authInfo) {
          if (authInfo.symmetricKey) {
            symmKeys = new SymmetricKey(authInfo.symmetricKey);
          }
        }
        return symmKeys;
      },
    }
  });
  Object.defineProperties(this, {
    'x509Thumbprint': {
      enumerable: true,
      get: function () {
        if (authInfo) {
          return authInfo.x509Thumbprint;
        } else {
          return undefined;
        }
      },
    }
  });
};

/**
 * @class           module:azure-iothub.Device
 * @classdesc       Creates a representation of a device for use in the
 *                  identity {@link module:azure-iothub.Registry} APIs.
 * @param {String}  jsonData        An optional JSON representation of the
 *                                  device, which will be mapped to properties
 *                                  in the object. If no argument is provided,
 *                                  Device roperties will be assigned default
 *                                  values.
 * @prop {String}   deviceId        Unique device identifier
 * @prop {String}   generationId    Used to disambiguate devices that have been
 *                                  deleted/recreated with the same `deviceId`
 * @prop {String}   etag            Weak entity tag assigned to this device
 *                                  identity description
 * @prop {String}   connectionState Whether the device is 'connected' or
 *                                  'disconnected'
 * @prop {String}   status          'enabled' (device authorized to connect,
 *                                  can send/receive messages) or 'disabled'
 * @prop {String}   statusReason    128-character string set when the device is
 *                                  disabled
 * @prop {String}   connectionStateUpdatedTime  Timestamp representing the last
 *                                  time `connectionState` changed
 * @prop {String}   statusUpdatedTime Timestamp representing the last time
 *                                  `status` changed
 * @prop {String}   lastActivityTime  Timestamp representing the last time the
 *                                  device authenticated, sent a message, or
 *                                  received a message
 * @prop {String}   cloudToDeviceMessageCount Number of c2d messages waiting to
 *                                  by delivered to the device
 * @prop {Object}   authentication  Contains the symmetric keys used to
 *                                  authenticate this device
 */
module.exports = function Device(jsonData) {
  var body;
  if (jsonData) {
    body = JSON.parse(jsonData);
    if (!body.deviceId) {
      throw new ReferenceError('Argument \'deviceId\' is ' + body.deviceId);
    }
  }
  else {
    body = {
      deviceId: null,
      generationId: null,
      etag: null,
      connectionState: 'Disconnected',
      status: 'Enabled',
      statusReason: null,
      connectionStateUpdatedTime: null,
      statusUpdatedTime: null,
      lastActivityTime: null,
      cloudToDeviceMessageCount: 0,
      authentication: {
        symmetricKey: {
          primaryKey: null,
          secondaryKey: null
        }
      }
    };
  }

  Object.defineProperties(this, {
    'deviceId': {
      enumerable: true,
      get: function () {
        return body.deviceId;
      },
      set: function (value) {
        body.deviceId = value;
      }
    },
    'generationId': {
      enumerable: true,
      get: function () {
        return body.generationId;
      },
    },
    'etag': {
      enumerable: true,
      get: function () {
        return body.etag;
      }
    },
    'connectionState': {
      enumerable: true,
      get: function () {
        return body.connectionState;
      }
    },
    'status': {
      enumerable: true,
      get: function () {
        return body.status;
      },
      set: function (value) {
        if (value.toLowerCase() !== 'enabled' &amp;&amp; value.toLowerCase() !== 'disabled') {
          throw new RangeError('status is neither Enabled or Disabled');
        }
        body.status = value;
      }
    },
    'statusReason': {
      enumerable: true,
      get: function () {
        return body.statusReason;
      },
      set: function (value) {
        body.statusReason = value;
      }
    },
    'connectionStateUpdatedTime': {
      enumerable: true,
      get: function () {
        return body.connectionStateUpdatedTime;
      }
    },
    'statusUpdatedTime': {
      enumerable: true,
      get: function () {
        return body.statusUpdatedTime;
      }
    },
    'lastActivityTime': {
      enumerable: true,
      get: function () {
        return body.lastActivityTime;
      }
    },
    'cloudToDeviceMessageCount': {
      enumerable: true,
      get: function () {
        return body.cloudToDeviceMessageCount;
      }
    }
  });

  Object.defineProperty(this, 'authentication', {
    enumerable: true,
    get: function () {
      var key;
      if (body.authentication) {
        key = new AuthenticationMechanism(body.authentication);
      }
      return key;
    }
  });
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-azure-iot-amqp-base.html">azure-iot-amqp-base</a></li><li><a href="module-azure-iot-common.html">azure-iot-common</a></li><li><a href="module-azure-iot-http-base.html">azure-iot-http-base</a></li><li><a href="module-azure-iothub.html">azure-iothub</a></li></ul><h3>Classes</h3><ul><li><a href="module-azure-iot-amqp-base.Amqp.html">azure-iot-amqp-base.Amqp</a></li><li><a href="module-azure-iot-amqp-base.AmqpMessage.html">azure-iot-amqp-base.AmqpMessage</a></li><li><a href="module-azure-iot-amqp-base.AmqpReceiver.html">azure-iot-amqp-base.AmqpReceiver</a></li><li><a href="module-azure-iot-common.ArgumentError.html">azure-iot-common.ArgumentError</a></li><li><a href="module-azure-iot-common.DeviceMaximumQueueDepthExceededError.html">azure-iot-common.DeviceMaximumQueueDepthExceededError</a></li><li><a href="module-azure-iot-common.DeviceNotFoundError.html">azure-iot-common.DeviceNotFoundError</a></li><li><a href="module-azure-iot-common.FormatError.html">azure-iot-common.FormatError</a></li><li><a href="module-azure-iot-common.Message.html">azure-iot-common.Message</a></li><li><a href="module-azure-iot-common.SharedAccessSignature.html">azure-iot-common.SharedAccessSignature</a></li><li><a href="module-azure-iot-common.UnauthorizedError.html">azure-iot-common.UnauthorizedError</a></li><li><a href="module-azure-iot-http-base.Http.html">azure-iot-http-base.Http</a></li><li><a href="module-azure-iothub.Amqp.html">azure-iothub.Amqp</a></li><li><a href="module-azure-iothub.Client.html">azure-iothub.Client</a></li><li><a href="module-azure-iothub.Device.html">azure-iothub.Device</a></li><li><a href="module-azure-iothub.Registry.html">azure-iothub.Registry</a></li></ul><h3>Events</h3><ul><li><a href="module-azure-iot-amqp-base.AmqpReceiver.html#event:errorReceived">azure-iot-amqp-base.AmqpReceiver#errorReceived</a></li><li><a href="module-azure-iot-amqp-base.AmqpReceiver.html#event:message">azure-iot-amqp-base.AmqpReceiver#message</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.1</a> on Mon Sep 26 2016 13:45:39 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
